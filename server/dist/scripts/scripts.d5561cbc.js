"use strict";angular.module("clientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode(!0),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/history.html",controller:"HistoryCtrl",controllerAs:"history"}).when("/signup",{templateUrl:"views/signup.html",controller:"SignupCtrl",controllerAs:"signup"}).when("/history",{templateUrl:"views/history.html",controller:"HistoryCtrl",controllerAs:"history"}).when("/tree",{templateUrl:"views/tree.html",controller:"TreeCtrl",controllerAs:"tree"}).when("/gallery",{templateUrl:"views/gallery.html",controller:"GalleryCtrl",controllerAs:"gallery"}).when("/links",{templateUrl:"views/links.html",controller:"LinksCtrl",controllerAs:"links"}).otherwise({redirectTo:"/"})}]),angular.module("clientApp").controller("MainCtrl",["$http",function(a){var b=a.get("/api/users"),c=this;b.then(function(a){c.awesomeUsers=a.data.users}),b["catch"](function(a){console.log(a)}),c.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],$(".nav a").on("click",function(){$(".nav").find(".active").removeClass("active"),$(this).parent().addClass("active")})}]),angular.module("clientApp").controller("HistoryCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("TreeCtrl",["$http",function(a){function b(a){function b(a,c){c=c||[];var d=0,e=a.children?a.children.length:0;for(c.push(a);e>d;d++)b(a.children[d],c);return c}function c(a){function d(b){b.children?(b._children=b.children,b.children=null):(b.children=b._children,b._children=null),c(a)}var e=b(a);e.forEach(function(a){a.y=230*a.depth+g});var f=q.selectAll("g.node").data(e,function(a){return a.id||(a.id=++i)}),h=f.enter().append("g").attr("class","node").attr("transform",function(b){return"translate("+a.y0+","+a.x0+")"}).on("click",d);h.append("text").attr("dy",function(a){return a.isRight?14:-8}).attr("text-anchor","middle").text(function(a){return a.name}).style("fill-opacity",1e-6);var k=f.transition().duration(j).attr("transform",function(a){var b=o(a);return"translate("+b.y+","+b.x+")"});k.select("text").style("fill-opacity",1);var m=f.exit().transition().duration(j).attr("transform",function(b){return p=o(b.parent||a),"translate("+p.y+","+p.x+")"}).remove();m.select("text").style("fill-opacity",1e-6);var r=q.selectAll("path.link").data(l.links(e),function(a){return a.target.id});r.enter().insert("path","g").attr("class","link").attr("d",function(b){var c={x:a.x0,y:a.y0};return n({source:c,target:c})}),r.transition().duration(j).attr("d",n),r.exit().transition().duration(j).attr("d",function(b){var c=o(b.source||a);return b.source.isRight?c.y-=g-(b.target.y-b.source.y):c.y+=g-(b.target.y-b.source.y),n({source:c,target:c})}).remove(),e.forEach(function(a){var b=o(a);a.x0=b.x,a.y0=b.y})}var d,e={top:10,right:10,bottom:10,left:10},f=1400-e.left-e.right,g=150,h=3e3-e.top-e.bottom,i=0,j=500,k=function(a){var b=[];if(a.winners)for(var c=0;c<a.winners.length;c++)a.winners[c].isRight=!1,a.winners[c].parent=a,b.push(a.winners[c]);if(a.kids)for(var c=0;c<a.kids.length;c++)a.kids[c].isRight=!0,a.kids[c].parent=a,b.push(a.kids[c]);return b.length?b:null},l=d3.layout.tree().size([h,f]),m=(d3.svg.diagonal().projection(function(a){return[a.y,a.x]}),function(a,b){var c=o(a.source),d=o(a.target),e=(d.y-c.y)/2;return a.isRight&&(e=-e),"M"+c.y+","+c.x+"H"+(c.y+e)+"V"+d.x+"H"+d.y}),n=m,o=function(a){var b=a.y;return a.isRight||(b=a.y-g,b=g-b),{x:a.x,y:b}},q=d3.select("#familyTree").append("svg").attr("width",f+e.right+e.left).attr("height",h+e.top+e.bottom).append("g").attr("transform","translate("+e.left+","+e.top+")");d=a[0],d.x0=h/2,d.y0=f/2;var r=d3.layout.tree().size([h,g]).children(function(a){return a.winners}),s=d3.layout.tree().size([h,g]).children(function(a){return a.kids});r.nodes(d),s.nodes(d);var t=function(a){a.children=k(a),a.children&&a.children.forEach(t)};t(d),d.isRight=!1,c(d)}var c=a.get("/api/tree"),d=this;c.then(function(a){d.tree=a.data.tree,$(document).ready(function(){b(d.tree)})}),c["catch"](function(a){console.log(a)}),this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("clientApp").controller("GalleryCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").controller("LinksCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/gallery.html","<p>This is the gallery view.</p>"),a.put("views/history.html",'<div class="centered title-block"> <h1>Our History</h1> </div> <div class="list-group"> <a href="#" class="list-group-item"> <div class="col-xs-10 col-sm-11"> <h4 class="list-group-item-heading">Ben and Clara Come to New York</h4> <p class="list-group-item-text">Written By: Viola Halper</p> </div> <div class="col-xs-2 col-sm-1"> <h2><i class="fa fa-angle-right"></i></h2> </div> <div class="clearfix"></div> </a> <a href="#" class="list-group-item"> <div class="col-xs-10 col-sm-11"> <h4 class="list-group-item-heading">Marty</h4> <p class="list-group-item-text">Written By: Viola Halper</p> </div> <div class="col-xs-2 col-sm-1"> <h2><i class="fa fa-angle-right"></i></h2> </div> <div class="clearfix"></div> </a> <a href="#" class="list-group-item"> <div class="col-xs-10 col-sm-11"> <h4 class="list-group-item-heading">Memories of 411 E. 171st Street</h4> <p class="list-group-item-text">Written By: Viola Halper</p> </div> <div class="col-xs-2 col-sm-1"> <h2><i class="fa fa-angle-right"></i></h2> </div> <div class="clearfix"></div> </a> </div>'),a.put("views/links.html","<p>This is the links view.</p>"),a.put("views/main.html",'<div id="welcome-message"> <div class="caption">Cappadocia, Anatolia, Turkey</div> </div>'),a.put("views/signup.html",'<div ng-controller="SignupCtrl" class="signup-container"> <div class="col-md-12"> <h3 class="signup-header">Signup as a New User</h3> <hr> <br> </div> <div class="signup-form"> <form class="form-horizontal"> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="firstname">First Name</label> <div class="col-md-5"> <input id="firstname" name="firstname" ng-model="signup.user.firstname" type="text" placeholder="Cole" class="form-control input-md"> </div> </div> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="lastname">Last Name</label> <div class="col-md-5"> <input id="lastname" name="lastname" ng-model="signup.user.lastname" type="text" placeholder="Morrison" class="form-control input-md"> </div> </div> <!-- Text input--> <div class="form-group"> <label class="col-md-4 control-label" for="email">Email</label> <div class="col-md-5"> <input id="email" name="email" ng-model="signup.user.email" type="text" placeholder="me@jcolemorrison.com" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password1">Password</label> <div class="col-md-5"> <input id="password1" name="password1" ng-model="signup.user.password1" type="password" placeholder="" class="form-control input-md"> </div> </div> <!-- Password input--> <div class="form-group"> <label class="col-md-4 control-label" for="password2">Retype Password</label> <div class="col-md-5"> <input id="password2" name="password2" ng-model="signup.user.password2" type="password" placeholder="" class="form-control input-md"> </div> </div> <!-- Button --> <div class="form-group"> <label class="col-md-4 control-label" for="signup"></label> <div class="col-md-5"> <button ng-click="signup.submit()" id="signup" name="signup" class="btn btn-success btn-block">Signup!</button> </div> </div> </form> </div> </div>'),a.put("views/tree.html",'<style type="text/css">.node circle {\n	    cursor: pointer;\n	    fill: #DF393B;\n	    stroke: steelblue;\n	    stroke-width: 1.5px;\n    }\n    .node text {\n        fill: #DF393B;\n        cursor: pointer;\n    }\n    .node text: hover {\n        font-weight: bold;\n    }\n    path.link {\n	    fill: none;\n	    stroke: #DF393B;\n	    stroke-width: 1.5px;\n    }</style> <div class="container page-content"> <div class="title-block"> <h1>The Chalom Family Tree</h1> </div> <div id="familyTree"></div> </div>')}]);